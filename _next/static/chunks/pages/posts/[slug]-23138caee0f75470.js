(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{592:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[slug]",function(){return n(9398)}])},1335:function(e,t,n){"use strict";var r=n(5893);n(7294);let a=e=>{if(!e.if){var t;return(0,r.jsx)(r.Fragment,{children:null!==(t=e.defaultNode)&&void 0!==t?t:null})}return(0,r.jsx)(r.Fragment,{children:e.children})};t.Z=a},7300:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(5893),a=n(9008),s=n.n(a),l=n(8038);let i=()=>(0,r.jsxs)(s(),{children:[(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/favicon/site.webmanifest"}),(0,r.jsx)("link",{rel:"mask-icon",href:"/favicon/safari-pinned-tab.svg",color:"#000000"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/favicon/favicon.ico"}),(0,r.jsx)("meta",{name:"msapplication-TileColor",content:"#000000"}),(0,r.jsx)("meta",{name:"msapplication-config",content:"/favicon/browserconfig.xml"}),(0,r.jsx)("meta",{name:"theme-color",content:"#000"}),(0,r.jsx)("link",{rel:"alternate",type:"application/rss+xml",href:"/feed.xml"}),(0,r.jsx)("meta",{property:"og:image",content:l.vC})]}),c=()=>(0,r.jsxs)("footer",{className:"bg-neutral-50 border-t border-neutral-200 text-center text-xs opacity-50 py-4",children:["\xa9 2022,"," ",(0,r.jsx)("a",{rel:"noopener noreferrer",className:"hover:underline hover:bg-indigo",href:"https://github.com/LZS911",target:"_blank",children:"LZS_911"}),", build with"," ",(0,r.jsx)("a",{rel:"noopener noreferrer",className:"underline hover:bg-indigo",href:"https://nextjs.org/",target:"_blank",children:"Next.js"})," ","and"," ",(0,r.jsx)("a",{rel:"noopener noreferrer",className:"underline hover:bg-indigo",href:"https://pages.github.com/?(null)",target:"_blank",children:"GitHub Pages"})]});var o=n(1664),d=n.n(o),m=n(1163),h=n(4184),x=n.n(h),u=n(5675),f=n.n(u),p=n(1335);let g=e=>{let{name:t,picture:n,showName:a,...s}=e;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(f(),{src:n,className:" rounded-full",alt:t,...s}),(0,r.jsx)(p.Z,{if:a,children:(0,r.jsx)("div",{className:"text-xl font-bold",children:t})})]})},j=[{href:"/",text:"Home"},{href:"/projects",text:"Projects"},{href:"/talks",text:"Talks"},{href:"/blogs",text:"Blogs"}],b=()=>{let{pathname:e}=(0,m.useRouter)();return(0,r.jsx)("header",{className:"text-white bg-black drop-shadow-2xl",children:(0,r.jsxs)("div",{className:"mx-auto my-0 max-w-[960px] py-6 px-4 flex items-center",children:[(0,r.jsx)(g,{name:"Ai.Haibara",picture:"/assets/blog/authors/haibara_2.jpg",height:100,width:100}),(0,r.jsxs)("div",{className:"ml-6",children:[(0,r.jsx)(d(),{href:"/",className:" font-bold text-3xl",children:l.qN}),(0,r.jsx)("div",{className:"mt-2",children:j.map(t=>(0,r.jsx)(d(),{href:t.href,className:x()({"text-black bg-white hover:border-none":t.href===e},"p-1 rounded-sm text-xl mr-2 hover:border-b-2 border-indigo"),children:t.text},t.text))})]})]})})},v=e=>{let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i,{}),(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(b,{}),(0,r.jsx)("main",{className:"p-6 flex justify-center",children:t}),(0,r.jsx)(c,{})]})]})};var N=v},6125:function(e,t,n){"use strict";var r=n(5893),a=n(4184),s=n.n(a),l=n(9008),i=n.n(l),c=n(8038);let o=e=>{let{content:t,title:n,theme:a="fancy"}=e;return(0,r.jsxs)("section",{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(null!=n?n:"Home"," | ").concat(c.qN)})}),(0,r.jsx)("div",{className:s()({["markdown-body-".concat(a)]:a},"max-w-3xl"),dangerouslySetInnerHTML:{__html:null!=t?t:""}})]})};t.Z=o},1595:function(e,t,n){"use strict";var r=n(5893);let a=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"flex justify-center font-[Arial] max-w-[864px] text-center",children:(0,r.jsx)("h1",{className:"text-5xl font-bold bg-indigo px-5 py-2 rounded-sm text-shadow-lg leading-[1.1]",children:t})})};t.Z=a},8038:function(e,t,n){"use strict";n.d(t,{qN:function(){return r},vC:function(){return a}});let r="Ai.Haibara codes",a="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&md=1&fontSize=100px&images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"},9398:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return j},default:function(){return b}});var r=n(5893),a=n(1163),s=n(2918),l=n(6125),i=n(1595),c=n(7300),o=n(1335),d=n(8420),m=n(6159);let h=e=>{let{dateString:t}=e,n=(0,d.Z)(t);return(0,r.jsx)("time",{dateTime:t,className:"text-center block my-4 text-sm opacity-60",children:(0,m.Z)(n,"LLLL	d, yyyy")})};var x=n(7294),u=n(3454);u.env.GH_CLIENT_SECRET,u.env.GITHUB_TOKEN;var f=n(5675),p=n.n(f);let g=e=>{let{slug:t}=e,[n,a]=(0,x.useState)([]),[s,l]=(0,x.useState)(!0),[i,c]=(0,x.useState)(null),[o,d]=(0,x.useState)(""),[m,h]=(0,x.useState)(!1),[u,f]=(0,x.useState)(null);(0,x.useEffect)(()=>{let e=async()=>{try{l(!0);let e=await fetch("/api/comments/".concat(t));if(!e.ok)throw Error("获取评论失败");let n=await e.json();a(n.comments||[])}catch(r){c("获取评论失败，请稍后再试"),console.error("Error fetching comments:",r)}finally{l(!1)}},n=async()=>{let e=document.cookie.split("; ").find(e=>e.startsWith("github_token="));if(e)try{f(null)}catch(t){console.error("Error fetching user info:",t)}};t&&(e(),n())},[t]);let g=async e=>{if(e.preventDefault(),o.trim())try{h(!0);let n=await fetch("/api/comments/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o})});if(!n.ok){let r=await n.json();throw Error(r.error||"提交评论失败")}let s=await fetch("/api/comments/".concat(t)),l=await s.json();a(l.comments||[]),d("")}catch(i){c(i instanceof Error?i.message:"提交评论失败，请稍后再试"),console.error("Error submitting comment:",i)}finally{h(!1)}},j=()=>{document.cookie="redirect_url=".concat(window.location.pathname,"; path=/; max-age=300"),window.location.href=function(){let e="".concat(window.location.origin,"/api/auth/github/callback");return"https://github.com/login/oauth/authorize?client_id=".concat("Ov23liLXaKy9K92VIsHt","&redirect_uri=").concat(encodeURIComponent(e),"&scope=public_repo")}()};return(0,r.jsxs)("div",{className:"mt-10 max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"评论"}),s?(0,r.jsx)("p",{children:"加载评论中..."}):i?(0,r.jsx)("p",{className:"text-red-500",children:i}):(0,r.jsxs)(r.Fragment,{children:[0===n.length?(0,r.jsx)("p",{className:"mb-4",children:"暂无评论，来添加第一条评论吧！"}):(0,r.jsx)("div",{className:"space-y-4 mb-6",children:n.map(e=>(0,r.jsxs)("div",{className:"border border-accent-2 p-4 rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(p(),{src:e.author.avatarUrl,alt:e.author.login,className:"w-8 h-8 rounded-full mr-2"}),(0,r.jsx)("a",{href:e.author.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-black hover:underline",children:e.author.login}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsx)("div",{className:"prose",dangerouslySetInnerHTML:{__html:e.bodyHTML}})]},e.id))}),u?(0,r.jsxs)("form",{onSubmit:g,className:"mt-6",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,r.jsx)(p(),{src:u.avatarUrl,alt:u.login,className:"w-8 h-8 rounded-full mr-2"}),(0,r.jsx)("span",{className:"font-medium",children:u.login})]}),(0,r.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),className:"w-full border border-accent-2 rounded-md p-2 min-h-[100px]",placeholder:"写下你的评论...",disabled:m}),(0,r.jsx)("button",{type:"submit",disabled:m||!o.trim(),className:"mt-2 bg-black text-white px-4 py-2 rounded-md hover:bg-opacity-90 disabled:opacity-50",children:m?"提交中...":"提交评论"})]}):(0,r.jsxs)("div",{className:"mt-6 border border-accent-2 p-4 rounded-md text-center",children:[(0,r.jsx)("p",{className:"mb-2",children:"登录后参与讨论"}),(0,r.jsx)("button",{onClick:j,className:"bg-black text-white px-4 py-2 rounded-md hover:bg-opacity-90",children:"使用 GitHub 登录"})]})]})]})};var j=!0;function b(e){let{post:t,morePosts:n,preview:d}=e,m=(0,a.useRouter)();return m.isFallback||(null==t?void 0:t.slug)?(0,r.jsx)(c.Z,{children:(0,r.jsx)(o.Z,{if:!m.isFallback,defaultNode:(0,r.jsx)(i.Z,{children:"Loading…"}),children:(0,r.jsxs)("article",{children:[(0,r.jsx)(i.Z,{children:t.title}),(0,r.jsx)(h,{dateString:t.date}),(0,r.jsx)(l.Z,{...t}),(0,r.jsx)(g,{slug:t.slug})]})})}):(0,r.jsx)(s.default,{statusCode:404})}}},function(e){e.O(0,[799,642,774,888,179],function(){return e(e.s=592)}),_N_E=e.O()}]);