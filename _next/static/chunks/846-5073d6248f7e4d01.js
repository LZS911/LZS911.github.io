(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{846:(e,t,r)=>{"use strict";r.d(t,{default:()=>R});var n=r(5155),a=r(2596),s=r(2115);let o=()=>"undefined"!=typeof document?document.documentElement.clientWidth:0,l=()=>"undefined"!=typeof document?document.documentElement.clientHeight:0,i="portal-button-position";function c(e){let{setIsOpen:t,isOpen:r,buttonRef:c}=e,{position:d,setPosition:u,isMinimized:x,setIsMinimized:m,currentPositionRef:h,isNearLeftEdge:g,isNearRightEdge:f,checkEdgeProximity:y,savePositionToLocalStorage:p,getButtonPositionStyle:v}=function(){let[e,t]=(0,s.useState)({x:0,y:0}),[r,n]=(0,s.useState)(!1),a=(0,s.useRef)({x:0,y:0});(0,s.useEffect)(()=>{try{let e=localStorage.getItem(i);if(e){let r=JSON.parse(e),n={x:Math.min(r.x,o()-54),y:Math.min(r.y,l()-60)};t(n),a.current=n}else{let e={x:o()-76,y:l()-76};t(e),a.current=e}}catch(r){console.error("Failed to load position from localStorage:",r);let e={x:o()-76,y:l()-76};t(e),a.current=e}},[]);let c=(0,s.useCallback)((e,t)=>{if(!t){let t=0===e.x,r=e.x===o()-54;n(t||r)}},[]),d=(0,s.useCallback)(e=>{try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Failed to save position to localStorage:",e)}},[]);(0,s.useEffect)(()=>{let n=()=>{let n;t(n=r&&0===e.x?{x:0,y:Math.min(e.y,l()-60)}:r?{x:o()-54,y:Math.min(e.y,l()-60)}:{x:Math.min(e.x,o()-54),y:Math.min(e.y,l()-60)}),a.current=n,d(n)};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[r,e,d]);let u=(0,s.useMemo)(()=>0===e.x,[e.x]),x=(0,s.useMemo)(()=>e.x===o()-54,[e.x]),m=(0,s.useCallback)(t=>{let n=t?a.current:e;if(r){if(x)return{transform:"translate3d(".concat(o()-18,"px, ").concat(n.y,"px, 0)"),position:"fixed",top:0,left:0,transformOrigin:"right center"};else if(u)return{transform:"translate3d(0px, ".concat(n.y,"px, 0)"),position:"fixed",top:0,left:0,transformOrigin:"left center"}}return{transform:"translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)"),position:"fixed",top:0,left:0,transformOrigin:"center center"}},[r,u,x,e]);return{position:e,setPosition:t,isMinimized:r,setIsMinimized:n,currentPositionRef:a,isNearLeftEdge:u,isNearRightEdge:x,checkEdgeProximity:c,savePositionToLocalStorage:d,getButtonPositionStyle:m}}(),{isDragging:k,handleDragStart:w,handleClick:b}=function(e,t,r,n,a,i){let[c,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)({x:0,y:0}),[m,h]=(0,s.useState)(!1),g=(0,s.useRef)(null),f=(0,s.useRef)({x:0,y:0}),y=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=e=>{if(c){Math.sqrt(Math.pow(e.clientX-f.current.x,2)+Math.pow(e.clientY-f.current.y,2))>3&&h(!0),null!==y.current&&cancelAnimationFrame(y.current);let n={x:Math.max(0,Math.min(o()-54,e.clientX-u.x)),y:Math.max(0,Math.min(l()-54,e.clientY-u.y))};r.current=n,y.current=requestAnimationFrame(()=>{t(n)})}},n=()=>{null!==y.current&&(cancelAnimationFrame(y.current),y.current=null),d(!1),t(r.current),a(r.current),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h(!1)},300)};return c&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",n)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),null!==y.current&&cancelAnimationFrame(y.current)}},[c,u,r,t,a]),(0,s.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),null!==y.current&&cancelAnimationFrame(y.current)},[]),(0,s.useEffect)(()=>{i.current&&!c&&n(e,c)},[i,c,e,n]),{isDragging:c,wasDragged:m,buttonRef:i,handleDragStart:e=>{if(i.current){d(!0),h(!1),f.current={x:e.clientX,y:e.clientY};let t=i.current.getBoundingClientRect();x({x:e.clientX-t.left,y:e.clientY-t.top})}},handleClick:e=>{m||e()}}}(d,u,h,y,p,c);return(0,n.jsx)("button",{ref:c,onClick:()=>b(()=>t(!r)),onMouseDown:w,onMouseEnter:()=>m(!1),onMouseLeave:()=>{y(d,k)},style:v(k),className:(0,a.A)({"w-4 opacity-50":x,"w-12":!x,"transition-all duration-300 ease-out":!k,"cursor-grabbing":k,"cursor-grab":!k,"rounded-l-none":g,"rounded-r-none":f},"portal-button-namespace z-40 h-12 bg-black hover:bg-gray-600 text-white rounded-full flex items-center justify-center shadow-[0_0_15px_rgba(0,0,0,0.2)] backdrop-blur-sm bg-opacity-80 transform-style-fix"),"aria-label":"工具箱",children:!x&&(0,n.jsxs)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}var d=r(6874),u=r.n(d),x=r(7650),m=r(5695);function h(e){let{onComplete:t,maxDisplayTags:r=20}=e,[o,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)({}),[d,h]=(0,s.useState)(!1),g=(0,s.useRef)(null),f=(0,m.useRouter)();(0,s.useEffect)(()=>{(async()=>{if(o){h(!0);try{let e=await fetch("/api/tags");if(e.ok){let t=await e.json();c(t.tags)}else console.error("获取标签失败")}catch(e){console.error("获取标签出错:",e)}finally{h(!1)}}})()},[o]),(0,s.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&e.target.classList.contains("popup-overlay")&&l(!1)}return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),(0,s.useEffect)(()=>{function e(e){"Escape"===e.key&&l(!1)}return o&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[o]);let y=e=>{let t=e/Math.max(...Object.values(i),1);return t>.8?"text-xl font-bold":t>.6?"text-lg font-semibold":t>.4?"text-base":t>.2?"text-sm":"text-xs"},p=e=>{l(!1),null==t||t(),f.push("/tags/".concat(encodeURIComponent(e)))},v=Object.keys(i).sort((e,t)=>i[t]-i[e]),k=v.length>r,w=v.slice(0,r),b=v.length-r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>{l(!o)},className:"inline-flex items-center w-full text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white","aria-label":"标签",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,n.jsx)("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),(0,n.jsx)("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),(0,n.jsx)("span",{className:"ml-2",children:"标签"})]}),o&&(0,x.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 bg-gray-500/75 backdrop-blur-sm z-50 flex items-start justify-center pt-24 popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&l(!1)},children:(0,n.jsxs)("div",{ref:g,className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"所有标签"}),(0,n.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto p-6",children:d?(0,n.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white"})}):0===v.length?(0,n.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,n.jsx)("p",{children:"暂无标签"})}):(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[w.map(e=>(0,n.jsxs)("button",{onClick:()=>p(e),className:(0,a.A)(y(i[e]),"inline-block px-3 py-1.5 rounded-full","bg-blue-100 text-blue-800 hover:bg-blue-200","dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800","transition-colors"),children:[e," ",(0,n.jsxs)("span",{className:"text-xs",children:["(",i[e],")"]})]},e)),k&&(0,n.jsxs)("button",{className:"inline-block px-3 py-1.5 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors",children:["+",b]})]})}),(0,n.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 text-center",children:(0,n.jsx)(u(),{href:"/tags",className:"text-blue-600 dark:text-blue-400 hover:underline",onClick:()=>{l(!1),null==t||t()},children:"查看全部标签页面"})})]})}),document.body)]})}var g=r(5703),f=r(7239),y=r(9447);let p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},v=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,k=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,w=/^([+-])(\d{2})(?::?(\d{2}))?$/;function b(e){return e?parseInt(e):1}function j(e){return e&&parseFloat(e.replace(",","."))||0}let N=[31,null,31,30,31,30,31,31,30,31,30,31];function C(e){return e%400==0||e%4==0&&e%100!=0}var L=r(2296);let E=e=>{let{dateString:t}=e,r=function(e,t){var r;let n,a,s=()=>(0,f.w)(void 0,NaN),o=(r=void 0,2),l=function(e){let t,r={},n=e.split(p.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],p.timeZoneDelimiter.test(r.date)&&(r.date=e.split(p.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=p.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(l.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let a=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:null===s?a:100*s,restDateString:e.slice((n[1]||n[2]).length)}}(l.date,o);n=function(e,t){var r,n,a,s,o,l,i,c;if(null===t)return new Date(NaN);let d=e.match(v);if(!d)return new Date(NaN);let u=!!d[4],x=b(d[1]),m=b(d[2])-1,h=b(d[3]),g=b(d[4]),f=b(d[5])-1;if(u){return(r=0,n=g,a=f,n>=1&&n<=53&&a>=0&&a<=6)?function(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let a=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+((t-1)*7+r+1-a)),n}(t,g,f):new Date(NaN)}{let e=new Date(0);return(s=t,o=m,l=h,o>=0&&o<=11&&l>=1&&l<=(N[o]||(C(s)?29:28))&&(i=t,(c=x)>=1&&c<=(C(i)?366:365)))?(e.setUTCFullYear(t,m,Math.max(x,h)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!n||isNaN(+n))return s();let i=+n,c=0;if(l.time&&isNaN(c=function(e){var t,r,n;let a=e.match(k);if(!a)return NaN;let s=j(a[1]),o=j(a[2]),l=j(a[3]);return(t=s,r=o,n=l,24===t?0===r&&0===n:n>=0&&n<60&&r>=0&&r<60&&t>=0&&t<25)?s*g.s0+o*g.Cg+1e3*l:NaN}(l.time)))return s();if(l.timezone){if(isNaN(a=function(e){var t,r;if("Z"===e)return 0;let n=e.match(w);if(!n)return 0;let a="+"===n[1]?-1:1,s=parseInt(n[2]),o=n[3]&&parseInt(n[3])||0;return(t=0,(r=o)>=0&&r<=59)?a*(s*g.s0+o*g.Cg):NaN}(l.timezone)))return s()}else{let e=new Date(i+c),r=(0,y.a)(0,null==t?void 0:t.in);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}return(0,y.a)(i+c+a,null==t?void 0:t.in)}(t);return(0,n.jsx)("time",{dateTime:t,className:"text-center block my-4 text-sm opacity-60",children:(0,L.GP)(r,"LLLL	d, yyyy")})};function S(e){let{onComplete:t}=e,[r,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),f=(0,s.useRef)(null),y=(0,s.useRef)(null),p=(0,m.useRouter)();(0,s.useEffect)(()=>{r&&y.current&&y.current.focus()},[r]),(0,s.useEffect)(()=>{function e(e){f.current&&!f.current.contains(e.target)&&e.target.classList.contains("popup-overlay")&&a(!1)}return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,s.useEffect)(()=>{function e(e){"Escape"===e.key&&a(!1)}return r&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[r]),(0,s.useEffect)(()=>{let e=async()=>{if(!o.trim()){c([]),u(!1);return}u(!0),g("");try{let e=new URLSearchParams({q:o.trim()}),t=await fetch("/api/search?".concat(e.toString()));if(!t.ok)throw Error("搜索请求失败");let r=await t.json();c(r.posts)}catch(e){console.error("搜索错误:",e),g("搜索时发生错误，请稍后再试")}finally{u(!1)}},t=setTimeout(()=>{r&&e()},300);return()=>clearTimeout(t)},[o,r]);let v=e=>{a(!1),null==t||t(),p.push("/posts/".concat(e))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>{a(!r),r||(l(""),c([]))},className:"inline-flex items-center w-full text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white","aria-label":"搜索",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,n.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,n.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,n.jsx)("span",{className:"ml-2",children:"搜索"})]}),r&&(0,x.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 bg-gray-500/75 backdrop-blur-sm z-50 flex items-start justify-center pt-24 popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&a(!1)},children:(0,n.jsxs)("div",{ref:f,className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 text-gray-500 dark:text-gray-400",children:[(0,n.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,n.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,n.jsx)("input",{ref:y,type:"text",value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&i.length>0&&v(i[0].slug)},placeholder:"搜索文章标题、内容...",className:"flex-1 ml-2 bg-transparent border-none outline-none text-gray-700 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400",autoComplete:"off"}),(0,n.jsx)("button",{onClick:()=>{a(!1),null==t||t()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto p-4",children:d?(0,n.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white"})}):h?(0,n.jsx)("div",{className:"text-center py-8 text-red-500 dark:text-red-400",children:(0,n.jsx)("p",{children:h})}):0===i.length?o.trim()?(0,n.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,n.jsx)("p",{children:"没有找到匹配的文章"})}):(0,n.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,n.jsx)("p",{children:"输入关键词开始搜索"})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["找到 ",i.length," 个结果"]}),i.slice(0,5).map(e=>(0,n.jsx)("article",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0",children:(0,n.jsxs)("button",{onClick:()=>v(e.slug),className:"block hover:bg-gray-50 dark:hover:bg-gray-700 p-2 -m-2 rounded w-full text-left",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),e.date&&(0,n.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:(0,n.jsx)(E,{dateString:e.date})}),e.excerpt&&(0,n.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 line-clamp-2",children:e.excerpt})]})},e.slug)),i.length>5&&(0,n.jsx)("div",{className:"text-center pt-2",children:(0,n.jsxs)("button",{onClick:()=>{a(!1),null==t||t(),p.push("/search?q=".concat(encodeURIComponent(o)))},className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:["查看全部 ",i.length," 个结果"]})})]})})]})}),document.body)]})}function M(e){let{setIsOpen:t,portalRef:r,href:o,buttonRef:l}=e,[i,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{fetch("/api/auth/check").then(e=>e.json()).then(e=>{c(e.authenticated)});let e=setTimeout(()=>{m(!0)},10);return()=>clearTimeout(e)},[]),(0,x.createPortal)((0,n.jsxs)("div",{ref:r,style:{...(()=>{if(!l.current)return{};let e=l.current.getBoundingClientRect(),t=e.top>window.innerHeight/2,r=e.left>window.innerWidth/2;return t&&r?{bottom:"".concat(window.innerHeight-e.top+12,"px"),right:"".concat(window.innerWidth-e.right+12,"px")}:t&&!r?{bottom:"".concat(window.innerHeight-e.top+12,"px"),left:"".concat(e.left,"px")}:!t&&r?{top:"".concat(e.bottom+12,"px"),right:"".concat(window.innerWidth-e.right+12,"px")}:{top:"".concat(e.bottom+12,"px"),left:"".concat(e.left,"px")}})()},className:(0,a.A)("w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl absolute portal-overlay transform transition-all duration-300 ease-out",{"opacity-100 scale-100":d,"opacity-0 scale-95":!d}),onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"工具箱"}),(0,n.jsx)("button",{onClick:()=>t(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsx)("div",{className:"flex items-center p-2 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors w-full",children:(0,n.jsx)(S,{onComplete:()=>t(!1)})}),(0,n.jsx)("div",{className:"flex items-center p-2 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors w-full",children:(0,n.jsx)(h,{onComplete:()=>t(!1)})}),(0,n.jsx)("div",{className:"w-full pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,n.jsxs)(u(),{href:"/archives",className:"flex items-center p-2 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors w-full",onClick:()=>t(!1),children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,n.jsx)("span",{children:"文章归档"})]})}),i&&(0,n.jsx)("div",{className:"w-full pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,n.jsxs)(u(),{href:o,className:"flex items-center p-2 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors w-full",onClick:()=>t(!1),children:[(0,n.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),(0,n.jsx)("span",{children:"/"===o?"返回博客":"进入博客编辑页面"})]})})]})]}),document.body)}function R(e){let{href:t}=e,{isOpen:r,setIsOpen:a,portalRef:o,buttonRef:l}=function(){let[e,t]=(0,s.useState)(!1),r=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function n(e){r.current&&!r.current.contains(e.target)&&e.target.classList.contains("portal-overlay")&&t(!1)}return e&&document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e]),(0,s.useEffect)(()=>{function r(e){"Escape"===e.key&&t(!1)}return e&&document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[e]),{isOpen:e,setIsOpen:t,portalRef:r,buttonRef:n}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{setIsOpen:a,isOpen:r,buttonRef:l}),r&&(0,n.jsx)(M,{setIsOpen:a,href:t,portalRef:o,buttonRef:l})]})}r(4281)},2596:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(n&&(n+=" "),n+=t);return n}},4281:()=>{},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}}]);