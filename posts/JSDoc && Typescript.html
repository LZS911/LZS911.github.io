<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>JSDoc &amp;&amp; Typescript | Ai.Haibara codes</title><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8681f744d5932be6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8681f744d5932be6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-59a90320855f5cf5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f46e289d7ac5e197.js" defer=""></script><script src="/_next/static/chunks/799-575b46febca3af7d.js" defer=""></script><script src="/_next/static/chunks/399-cac0cd8ed02bf02a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-e2afa3a98c674f72.js" defer=""></script><script src="/_next/static/I1dfurZrW8Icwse08slK7/_buildManifest.js" defer=""></script><script src="/_next/static/I1dfurZrW8Icwse08slK7/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><header class="text-white bg-black drop-shadow-2xl"><div class="mx-auto my-0 max-w-[960px] py-6 px-4 flex items-center"><div class="flex items-center"><img alt="Ai.Haibara" src="/assets/blog/authors/haibara_2.jpg" width="100" height="100" decoding="async" data-nimg="1" class=" rounded-full" loading="lazy" style="color:transparent"/></div><div class="ml-6"><a class=" font-bold text-3xl" href="/">Ai.Haibara codes</a><div class="mt-2"><a class="p-1 rounded-sm text-xl mr-2 hover:border-b-2 border-indigo" href="/">Home</a><a class="p-1 rounded-sm text-xl mr-2 hover:border-b-2 border-indigo" href="/projects">Projects</a><a class="p-1 rounded-sm text-xl mr-2 hover:border-b-2 border-indigo" href="/talks">Talks</a><a class="p-1 rounded-sm text-xl mr-2 hover:border-b-2 border-indigo" href="/blogs">Blogs</a></div></div></div></header><main class="p-6 flex justify-center"><article><div class="flex justify-center font-[Arial] max-w-[864px] text-center"><h1 class="text-5xl font-bold bg-indigo px-5 py-2 rounded-sm text-shadow-lg leading-[1.1]">JSDoc &amp;&amp; Typescript</h1></div><time dateTime="2023-11-30" class="text-center block my-4 text-sm opacity-60">November	30, 2023</time><section><div class="markdown-body-fancy max-w-3xl"><p>在聊 JSDOC 之前，我们先看一篇新闻:</p>
<p>在这篇新闻中（<a href="https://devclass.com/2023/05/11/typescript-is-not-worth-it-for-developing-libraries-says-svelte-author-as-team-switches-to-javascript-and-jsdoc/">https://devclass.com/2023/05/11/typescript-is-not-worth-it-for-developing-libraries-says-svelte-author-as-team-switches-to-javascript-and-jsdoc/</a>），Svelte 的作者表示，对于开发库而言，TypeScript 并不值得使用，并转而选择 JavaScript 和 JSDoc。让我们来看看 JSDoc 是什么以及它是否能够实现与 TypeScript 相同的功能。</p>
<p><img src="/assets/jsdoc/example-1.png" alt="alt"></p>
<p>TypeScript 是一种为 JavaScript 添加类型支持的语言，它提供了类型提示和类型检查等功能，相信大家对它都很熟悉。</p>
<p>那么，JSDoc 能否完成与 TypeScript 相同的功能呢？为什么 Svelte 选择放弃 TypeScript 呢？</p>
<p>让我们带着这些疑问来了解一下 JSDoc 是什么东西。</p>
<h2 id="从零开始的-jsdoc"><a aria-hidden="true" tabindex="-1" href="#从零开始的-jsdoc"><span class="icon icon-link"></span></a>从零开始的 JSDoc</h2>
<p>了解一个第三方库最好的办法一定是找到它的 <a href="https://jsdoc.app/about-getting-started">Getting started</a>，通过简单的阅读，我们可以知道 JSDoc 提供了通过在代码块上方添加注释的方式来生成一个网站.</p>
<p><img src="/assets/jsdoc/example-2.png" alt="alt"></p>
<p>但是仅仅只有这个功能的情况下，它又是怎么能够替代 Typescript 的呢?</p>
<h2 id="typescript--jsdoc"><a aria-hidden="true" tabindex="-1" href="#typescript--jsdoc"><span class="icon icon-link"></span></a>Typescript &#x26;&#x26; JSDoc</h2>
<p>在 Typescript 3.7 之后，TypeScript 添加了对使用 JSDoc 语法从 JavaScript 生成 .d.ts 文件的支持。 下面是具体的文档地址:</p>
<p><a href="https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html">Creating .d.ts Files from .js files</a></p>
<p>看到这里后，我想文章开头的疑问便很好的得到了解释. 其实，并不存在什么放弃，typescript 只是换了一种形式仍然存在我们的项目中。</p>
<p>通过这个新功能，我们可以使用 JSDoc 注释来为 JavaScript 代码添加类型信息，并生成对应的声明文件（.d.ts），以提供类型检查和类型提示的支持。</p>
<p>好了，说了这么多，我们来看下具体的实践吧.</p>
<h3 id="实践"><a aria-hidden="true" tabindex="-1" href="#实践"><span class="icon icon-link"></span></a>实践</h3>
<p><img src="/assets/jsdoc/example-3.png" alt="alt"></p>
<p>在我们开启了 tsconfig 中的 <code>allowJs</code> 以及 <code>checkJs</code> 后，即使在 js 文件中，依然会为我们检查出类型错误。</p>
<p>现在，我们给这个函数加上 JSDoc 注释:</p>
<p><img src="/assets/jsdoc/example-4.png" alt="alt"></p>
<p>此时已经能够正确的推导出类型了，接下来，我们来个稍微复杂点的函数。</p>
<p><img src="/assets/jsdoc/example-5.png" alt="alt"></p>
<p><img src="/assets/jsdoc/example-7.png" alt="alt"></p>
<p>由于 vite 包中提供了 UserConfig 的类型， 所以我们可以在 JSDoc 中直接 <code>import</code> 该类型， 这样， 在 js 文件中，同样能够获取到类型提示以及类型检查的功能。</p>
<p>接下来， 在项目中执行 <code>npx tsc</code>， 可以看到， typescript 已经为我们生成了 index.d.ts 的文件， 这样， 当其他人来引用这个项目时， 同样也能享受到类型提示以及类型检查。</p>
<p><img src="/assets/jsdoc/example-6.png" alt="alt"></p>
<p>通过这些功能，TypeScript 提供了一种逐渐引入类型检查和类型提示的方式，使我们能够在 JavaScript 项目中享受到 TypeScript 的优势，同时保留项目的灵活性和兼容性。</p></div></section></article></main><footer class="bg-neutral-50 border-t border-neutral-200 text-center text-xs opacity-50 py-4">© 2022,<!-- --> <a rel="noopener noreferrer" class="hover:underline hover:bg-indigo" href="https://github.com/LZS911" target="_blank">LZS_911</a>, build with<!-- --> <a rel="noopener noreferrer" class="underline hover:bg-indigo" href="https://nextjs.org/" target="_blank">Next.js</a> <!-- -->and<!-- --> <a rel="noopener noreferrer" class="underline hover:bg-indigo" href="https://pages.github.com/?(null)" target="_blank">GitHub Pages</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"JSDoc \u0026\u0026 Typescript","date":"2023-11-30","slug":"JSDoc \u0026\u0026 Typescript","author":"Ai.Haibara","content":"\u003cp\u003e在聊 JSDOC 之前，我们先看一篇新闻:\u003c/p\u003e\n\u003cp\u003e在这篇新闻中（\u003ca href=\"https://devclass.com/2023/05/11/typescript-is-not-worth-it-for-developing-libraries-says-svelte-author-as-team-switches-to-javascript-and-jsdoc/\"\u003ehttps://devclass.com/2023/05/11/typescript-is-not-worth-it-for-developing-libraries-says-svelte-author-as-team-switches-to-javascript-and-jsdoc/\u003c/a\u003e），Svelte 的作者表示，对于开发库而言，TypeScript 并不值得使用，并转而选择 JavaScript 和 JSDoc。让我们来看看 JSDoc 是什么以及它是否能够实现与 TypeScript 相同的功能。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-1.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003eTypeScript 是一种为 JavaScript 添加类型支持的语言，它提供了类型提示和类型检查等功能，相信大家对它都很熟悉。\u003c/p\u003e\n\u003cp\u003e那么，JSDoc 能否完成与 TypeScript 相同的功能呢？为什么 Svelte 选择放弃 TypeScript 呢？\u003c/p\u003e\n\u003cp\u003e让我们带着这些疑问来了解一下 JSDoc 是什么东西。\u003c/p\u003e\n\u003ch2 id=\"从零开始的-jsdoc\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#从零开始的-jsdoc\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e从零开始的 JSDoc\u003c/h2\u003e\n\u003cp\u003e了解一个第三方库最好的办法一定是找到它的 \u003ca href=\"https://jsdoc.app/about-getting-started\"\u003eGetting started\u003c/a\u003e，通过简单的阅读，我们可以知道 JSDoc 提供了通过在代码块上方添加注释的方式来生成一个网站.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-2.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e但是仅仅只有这个功能的情况下，它又是怎么能够替代 Typescript 的呢?\u003c/p\u003e\n\u003ch2 id=\"typescript--jsdoc\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#typescript--jsdoc\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTypescript \u0026#x26;\u0026#x26; JSDoc\u003c/h2\u003e\n\u003cp\u003e在 Typescript 3.7 之后，TypeScript 添加了对使用 JSDoc 语法从 JavaScript 生成 .d.ts 文件的支持。 下面是具体的文档地址:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html\"\u003eCreating .d.ts Files from .js files\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e看到这里后，我想文章开头的疑问便很好的得到了解释. 其实，并不存在什么放弃，typescript 只是换了一种形式仍然存在我们的项目中。\u003c/p\u003e\n\u003cp\u003e通过这个新功能，我们可以使用 JSDoc 注释来为 JavaScript 代码添加类型信息，并生成对应的声明文件（.d.ts），以提供类型检查和类型提示的支持。\u003c/p\u003e\n\u003cp\u003e好了，说了这么多，我们来看下具体的实践吧.\u003c/p\u003e\n\u003ch3 id=\"实践\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#实践\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e实践\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-3.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e在我们开启了 tsconfig 中的 \u003ccode\u003eallowJs\u003c/code\u003e 以及 \u003ccode\u003echeckJs\u003c/code\u003e 后，即使在 js 文件中，依然会为我们检查出类型错误。\u003c/p\u003e\n\u003cp\u003e现在，我们给这个函数加上 JSDoc 注释:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-4.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e此时已经能够正确的推导出类型了，接下来，我们来个稍微复杂点的函数。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-5.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-7.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e由于 vite 包中提供了 UserConfig 的类型， 所以我们可以在 JSDoc 中直接 \u003ccode\u003eimport\u003c/code\u003e 该类型， 这样， 在 js 文件中，同样能够获取到类型提示以及类型检查的功能。\u003c/p\u003e\n\u003cp\u003e接下来， 在项目中执行 \u003ccode\u003enpx tsc\u003c/code\u003e， 可以看到， typescript 已经为我们生成了 index.d.ts 的文件， 这样， 当其他人来引用这个项目时， 同样也能享受到类型提示以及类型检查。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/jsdoc/example-6.png\" alt=\"alt\"\u003e\u003c/p\u003e\n\u003cp\u003e通过这些功能，TypeScript 提供了一种逐渐引入类型检查和类型提示的方式，使我们能够在 JavaScript 项目中享受到 TypeScript 的优势，同时保留项目的灵活性和兼容性。\u003c/p\u003e","theme":"fancy","tag":[null]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"JSDoc \u0026\u0026 Typescript"},"buildId":"I1dfurZrW8Icwse08slK7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>