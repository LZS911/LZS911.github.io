1:"$Sreact.fragment"
2:I[7555,[],""]
3:I[1901,["874","static/chunks/874-16716eedeadde879.js","39","static/chunks/app/error-d036ecfd03716e30.js"],"default"]
4:I[1295,[],""]
5:I[9543,["874","static/chunks/874-16716eedeadde879.js","345","static/chunks/app/not-found-2113bbd7a2f55e8f.js"],"default"]
8:I[9665,[],"MetadataBoundary"]
a:I[9665,[],"OutletBoundary"]
d:I[4911,[],"AsyncMetadataOutlet"]
f:I[8460,["209","static/chunks/app/loading-b73dd9bd22c3caa2.js"],"default"]
10:I[9665,[],"ViewportBoundary"]
12:I[6614,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/2626867bd1decdff.css","style"]
0:{"P":null,"b":"-Iu8KnLDp0bD3kZkGuE9H","p":"","c":["","posts","%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95"],"i":false,"f":[[["",{"children":["(article)",{"children":["posts",{"children":[["slug","%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95","d"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/2626867bd1decdff.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$3","errorStyles":[],"errorScripts":[],"template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","$L5",null,{}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["(article)",["$","$1","c",{"children":[null,"$L6"]}],{"children":["posts",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L7",["$","$L8",null,{"children":"$L9"}],null,["$","$La",null,{"children":["$Lb","$Lc",["$","$Ld",null,{"promise":"$@e"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},[["$","$Lf","l",{}],[],[]],false],["$","$1","h",{"children":[null,["$","$1","N2gis2o_e3W2KL4_BlVHA",{"children":[["$","$L10",null,{"children":"$L11"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$12","$undefined"],"s":false,"S":true}
13:I[8565,["874","static/chunks/874-16716eedeadde879.js","766","static/chunks/766-eeb113df4f56c105.js","651","static/chunks/app/(article)/layout-18bcffe355ed9a9b.js"],"default"]
14:I[7832,["874","static/chunks/874-16716eedeadde879.js","766","static/chunks/766-eeb113df4f56c105.js","651","static/chunks/app/(article)/layout-18bcffe355ed9a9b.js"],"default"]
15:"$Sreact.suspense"
16:I[4911,[],"AsyncMetadata"]
6:["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":[["$","div",null,{"className":"min-h-screen","children":[["$","$L13",null,{}],["$","main",null,{"className":"p-6 flex justify-center","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"bg-neutral-50 border-t border-neutral-200 text-center text-xs opacity-50 py-4","children":["Â© 2022 - ",2025,["$","a",null,{"rel":"noopener noreferrer","className":"hover:underline hover:bg-indigo","href":"https://github.com/LZS911","target":"_blank","children":", LZS_911"}],", build with"," ",["$","a",null,{"rel":"noopener noreferrer","className":"underline hover:bg-indigo","href":"https://nextjs.org/","target":"_blank","children":"Next.js"}]," ","and"," ",["$","a",null,{"rel":"noopener noreferrer","className":"underline hover:bg-indigo","href":"https://pages.github.com/?(null)","target":"_blank","children":"GitHub Pages"}]]}]]}],["$","$L14",null,{"href":"/practice"}]]}]}]
9:["$","$15",null,{"fallback":null,"children":["$","$L16",null,{"promise":"$@17"}]}]
c:null
18:I[5099,["766","static/chunks/766-eeb113df4f56c105.js","62","static/chunks/62-36d7af331e30e687.js","520","static/chunks/app/(article)/posts/%5Bslug%5D/page-2ec56518ac6621da.js"],"ThemeLoader"]
19:Td2c,<h2 id="è®°å½•ä»€ä¹ˆ"><a aria-hidden="true" tabindex="-1" href="#è®°å½•ä»€ä¹ˆ"><span class="icon icon-link"></span></a>è®°å½•ä»€ä¹ˆ?</h2>
<p>è®°å½•å¼€å‘ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„çª—ä½“ç¨‹åºæ—¶é‡åˆ°çš„ä¸€äº› <code>bug</code> å’Œä¸€äº›ä¸å¤ªç†Ÿæ‚‰çŸ¥è¯†ç‚¹.</p>
<p>é¡¹ç›®æŠ€æœ¯æ ˆ: <code>react + electron + koa2</code></p>
<h3 id="1-ä½¿ç”¨-koa2-cors-ä¸­é—´ä»¶è§£å†³è·¨åŸŸåä¸ºä»€ä¹ˆè¿˜æ˜¯æç¤ºè·¨åŸŸçš„é—®é¢˜"><a aria-hidden="true" tabindex="-1" href="#1-ä½¿ç”¨-koa2-cors-ä¸­é—´ä»¶è§£å†³è·¨åŸŸåä¸ºä»€ä¹ˆè¿˜æ˜¯æç¤ºè·¨åŸŸçš„é—®é¢˜"><span class="icon icon-link"></span></a>1. ä½¿ç”¨ <code>koa2-cors</code> ä¸­é—´ä»¶è§£å†³è·¨åŸŸåä¸ºä»€ä¹ˆè¿˜æ˜¯æç¤ºè·¨åŸŸçš„é—®é¢˜</h3>
<p>è·¨åŸŸåº”è¯¥æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†, è¿™é‡Œä¸è¿‡å¤šè§£é‡Š. åœ¨å¼€å‘ç¯å¢ƒä¸Š, è·¨åŸŸé—®é¢˜å‰åç«¯éƒ½èƒ½è¿›è¡Œè§£å†³. æœ¬é¡¹ç›®ä¸­é‡‡ç”¨æœåŠ¡ç«¯ä½¿ç”¨<code>koa2-cors</code> ä¸­é—´ä»¶æ¥è¿›è¡Œè§£å†³.</p>
<p>æŒ‰ç…§åŒ…çš„å®˜ç½‘è¿›è¡Œé…ç½®</p>
<p><img src="../assets/images/treasure-bowl-question/koa-cors-docs.jpg" alt="alt"></p>
<p>å‰ç«¯è°ƒç”¨æ¥å£</p>
<p><img src="../assets/images/treasure-bowl-question/request-error.jpg" alt="alt"></p>
<p>å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰è§£å†³è·¨åŸŸé—®é¢˜, ä½†æ˜¯ <code>Google</code> æ˜æ˜å‘Šè¯‰æˆ‘è¿™ä¸ªåŒ…å°±èƒ½è§£å†³è·¨åŸŸé—®é¢˜å•Š ğŸ˜«ğŸ˜«ğŸ˜«</p>
<p>ç»§ç»­<code>Google</code> åæ— æœ, äºæ˜¯å†·é™ä¸‹æ¥åˆ†ææŠ¥é”™ä¿¡æ¯, å‘ç°è¿™æ¬¡æŠ¥é”™ä¿¡æ¯å’Œä»¥å¾€çš„è·¨åŸŸæŠ¥é”™ä¿¡æ¯å¹¶ä¸ç›¸åŒ, æœ€åå¤šäº†ä¸€æ®µè¯:</p>
<p><code>The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.</code></p>
<p>ä¹Ÿå°±æ˜¯è¯´ è¿™é‡Œçš„ <code>origin</code> åœ¨åŒ…å«å‡­è¯ä¿¡æ¯æ—¶å¹¶ä¸èƒ½è®¾ç½®ä¸º <code>*</code>. äºæ˜¯å›åˆ°å‰ç«¯é¡¹ç›®ä¸­å‘ç° <code>axios</code> çš„é…ç½®ä¸­è®¾ç½®äº†</p>
<pre><code class="hljs language-javascript">axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¯¥é…ç½®è¡¨ç¤ºå¦‚æœå‰ç«¯é¡¹ç›®åœ¨è·¨åŸŸçš„æƒ…å†µä¸‹èƒ½å¤Ÿæºå¸¦ <code>cookies</code> ä¿¡æ¯.</p>
<p>è€Œä¸ºä»€ä¹ˆå½“åŒ…å«å‡­è¯æ—¶ä¸èƒ½è®¾ç½®ä¸º <code>*</code> å‘¢?</p>
<p>é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Headers">MDN</a> å¾—çŸ¥:</p>
<blockquote>
<p>å¯¹äºæ²¡æœ‰å‡­æ®çš„è¯·æ±‚ï¼ˆæ²¡æœ‰ <code>HTTP cookie</code> æˆ– <code>HTTP</code> è®¤è¯ä¿¡æ¯çš„è¯·æ±‚ï¼‰ï¼Œå€¼ <code>*</code> ä»…ä½œä¸ºç‰¹æ®Šçš„é€šé…ç¬¦å€¼ã€‚ åœ¨å…·æœ‰å‡­æ®çš„è¯·æ±‚ä¸­ï¼Œå®ƒè¢«è§†ä¸ºæ²¡æœ‰ç‰¹æ®Šè¯­ä¹‰çš„æ–‡å­—æ ‡å¤´åç§° <code>*</code> ã€‚ è¯·æ³¨æ„ï¼Œ<code>Authorization</code> æ ‡å¤´ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦ï¼Œå¹¶ä¸”å§‹ç»ˆéœ€è¦æ˜ç¡®åˆ—å‡ºã€‚</p>
</blockquote>
<p>è€Œè¦åœ¨æºå¸¦å‡­æ®çš„åŒæ—¶ä¹Ÿè¦æ”¯æŒè·¨åŸŸä¾¿å¾—è¿™æ ·é…ç½®:</p>
<pre><code class="hljs language-javascript">   <span class="hljs-title function_">origin</span>(<span class="hljs-params">ctx</span>) {
        <span class="hljs-keyword">return</span> ctx.<span class="hljs-property">header</span>.<span class="hljs-property">origin</span> ?? <span class="hljs-string">''</span>;
      },
</code></pre>
<p>åæ€:</p>
<ol>
<li>å„ç§æ— è„‘ <code>cv</code> æ“ä½œ...</li>
<li>è¿˜æ˜¯ä¸å¤ªç†Ÿæ‚‰ <code>http</code> åè®®çš„å„ç§é…ç½®...</li>
</ol>7:["$","article",null,{"children":[["$","div",null,{"className":"flex justify-center font-[Arial] max-w-[864px] text-center","children":["$","h1",null,{"className":"text-[2.5rem] font-bold bg-lime-300 px-5 py-2 rounded-sm text-shadow-lg leading-[1.1]","children":"é—®é¢˜è®°å½•"}]}],["$","time",null,{"dateTime":"2022-01-01","className":"text-center block my-4 text-sm opacity-60","children":"January\t1, 2022"}],[null,["$","$L18",null,{"theme":"arknights"}],["$","section",null,{"className":"markdown-body-arknights max-w-3xl","dangerouslySetInnerHTML":{"__html":"$19"}}]],null]}]
11:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
b:null
17:{"metadata":[["$","title","0",{"children":"Ai.Haibara codes"}],["$","meta","1",{"name":"description","content":"LZS Blog"}],["$","link","2",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"96x96"}]],"error":null,"digest":"$undefined"}
e:{"metadata":"$17:metadata","error":null,"digest":"$undefined"}
